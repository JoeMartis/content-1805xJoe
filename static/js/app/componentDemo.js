(function(requirejs,require,define){define("app/componentDemo",["require","jquery","webfonts","utils","tool","color","slider","vslider","text","label","richtext","textbox","dropdown","graph"],function(require){var $=require("jquery"),WebFonts=require("webfonts"),U=require("utils"),Tool=require("tool"),Color=require("color"),Slider=require("slider"),VSlider=require("vslider"),Text=require("text"),Label=require("label"),RichText=require("richtext"),TextBox=require("textbox"),DropDown=require("dropdown"),Graph=require("graph"),vinxSlider,vinySlider,rSlider,thetaSlider,aSlider,bSlider,cSlider,dSlider,tool,graph,vinTitle,vinxText,vinyText,voutTitle,voutxText,voutyText,vinxTitle,voutxTitle,testDropDown1,testDropDown2,richText,vinx=1,viny=1,voutx,vouty,r,theta,a=1,b=1,c=1,d=0,richtext,tb;WebFonts.load(initializeTool);function initializeTool(){try{U.testForFeatures(!0,!1,!1),initTool(),draw()}catch(err){window.alert(err.toString()+" The tool is disabled.")}}function loadJSON(){$.ajax({url:"config.json"
,dataType:"json",success:function(data){$.each(data,function(key,val){window.alert("key="+key+" "+"val="+val)})}})}function initTool(){var daimpCanvas=$("#daimp")[0];daimpCanvas.onselectstart=function(){return!1};var daimpBuffer=document.createElement("canvas");daimpBuffer.width=daimpCanvas.width,daimpBuffer.height=daimpCanvas.height;var container=document.getElementById("container");tool=new Tool(800,800,daimpCanvas,daimpBuffer,$(daimpCanvas),container),graph=new Graph(90,40,390,340),setGraph(),graph.addEventListener("mousedown",graphMouseDown),graph.addEventListener("mousedrag",graphMouseDrag),tool.add(graph),initialize(),vinySlider=new VSlider(40,0,80,380),vinySlider.addEventListener("mousedown",vinySliderMouseDown),vinySlider.addEventListener("mousedrag",vinySliderMouseDown),tool.add(vinySlider),vinxSlider=new Slider(50,350,430,390),vinxSlider.addEventListener("mousedown",vinxSliderMouseDown),vinxSlider.addEventListener("mousedrag",vinxSliderMouseDown),tool.add(vinxSlider),rSlider=new 
Slider(50,450,250,490),rSlider.addEventListener("mousedown",rSliderMouseDown),rSlider.addEventListener("mousedrag",rSliderMouseDown),tool.add(rSlider),thetaSlider=new Slider(50,500,250,540),thetaSlider.addEventListener("mousedown",thetaSliderMouseDown),thetaSlider.addEventListener("mousedrag",thetaSliderMouseDown),tool.add(thetaSlider),aSlider=new Slider(500,200,700,240),aSlider.addEventListener("mousedown",aSliderMouseDown),aSlider.addEventListener("mousedrag",aSliderMouseDown),tool.add(aSlider),bSlider=new Slider(700,200,900,240),bSlider.addEventListener("mousedown",bSliderMouseDown),bSlider.addEventListener("mousedrag",bSliderMouseDown),tool.add(bSlider),cSlider=new Slider(500,250,700,290),cSlider.addEventListener("mousedown",cSliderMouseDown),cSlider.addEventListener("mousedrag",cSliderMouseDown),tool.add(cSlider),dSlider=new Slider(700,250,900,290),dSlider.addEventListener("mousedown",dSliderMouseDown),dSlider.addEventListener("mousedrag",dSliderMouseDown),tool.add(dSlider),setSliders
(),vinxTitle=new Text(540,60,0,0),vinxTitle.text="Input vector",vinxTitle.textColor=Color.yellow,tool.add(vinxTitle),vinxText=new Text(540,100,0,0),vinxText.text="1.00",vinxText.textColor=Color.yellow,tool.add(vinxText),vinyText=new Text(540,130,0,0),vinyText.text="1.00",vinyText.textColor=Color.yellow,tool.add(vinyText),voutxTitle=new Text(740,60,0,0),voutxTitle.text="Output vector",voutxTitle.textColor=Color.cyan,tool.add(voutxTitle),voutxText=new Text(740,100,0,0),voutxText.text="2.00",voutxText.textColor=Color.cyan,tool.add(voutxText),voutyText=new Text(740,130,0,0),voutyText.text="1.00",voutyText.textColor=Color.cyan,tool.add(voutyText),testDropDown1=new DropDown(500,320,600,350),testDropDown1.textOptions=["f(x) = x - 0.5x^{3} + 0.04x^{5}","f(x) = e^{x}","f(x) = log_{e}(x)","f(x) = cos(sqrt(x)), for x>=0","f(x) = 1/x","f(x) = sin(x) + 1/8 * sin(8x)","f(x) = e^{-1/x^2} for x > 0; f(x) = 0 for x <= 0"],testDropDown1.which=0,tool.add(testDropDown1),testDropDown2=new DropDown(500,675,600
,700),testDropDown2.textOptions=["f(x) = x - 0.5x^{3} + 0.04x^{5}","f(x) = e^{x}","f(x) = log_{e}(x)","f(x) = cos(sqrt(x)), for x>=0","f(x) = 1/x","f(x) = sin(x) + 1/8 * sin(8x)","f(x) = e^{-1/x^2} for x > 0; f(x) = 0 for x <= 0"],testDropDown2.which=0,tool.add(testDropDown2),richText=new RichText(650,600);var html="<span class='red-text unselectable'>Unselectable text: &theta; = 2.47</span>&nbsp;<span class='green-text'>Green: &beta;<sub>2</sub></span><span style='font-size:100px'>!</span>";richText.node.innerHTML=html,richText.baseLine=600,tool.add(richText),richText.draw();var cols=2,rows=2;tb=new Array(rows*cols);var basex=500,basey=400;for(var y=0,i=0;y<rows;y++)for(var x=0;x<cols;x++)tb[i]=new TextBox(basex+60*x,basey+34*y,50),tool.add(tb[i]),tb[i].draw(),tb[i].node.value=i,i++;tb[0].node.addEventListener("keypress",aTextBoxKeyPress),tb[1].node.addEventListener("keypress",bTextBoxKeyPress),tb[2].node.addEventListener("keypress",cTextBoxKeyPress),tb[3].node.addEventListener("keypress"
,dTextBoxKeyPress);var temp=new Text(650,438,0,0);temp.text="\u2190 Press [ENTER]",temp.textColor=Color.yellow,tool.add(temp)}function initialize(){r=calculateR(),theta=calculateTheta(),voutx=calculatevoutx(),vouty=calculatevouty()}function setSliders(){vinxSlider.xmin=-6,vinxSlider.xmax=6,vinxSlider.xspan=12,vinxSlider.setValue(vinx),vinxSlider.shortTickStep=0,vinxSlider.longTickStep=1,vinxSlider.labelStep=1,vinxSlider.text="x",vinxSlider.textColor=Color.yellow,vinxSlider.valueDecimalDigits=2,vinxSlider.labelDecimalDigits=0,vinySlider.ymin=-6,vinySlider.ymax=6,vinySlider.yspan=12,vinySlider.setValue(viny),vinySlider.shortTickStep=0,vinySlider.longTickStep=1,vinySlider.labelStep=1,vinySlider.text="y",vinySlider.textColor=Color.yellow,vinySlider.valueDecimalDigits=2,vinySlider.labelDecimalDigits=0,rSlider.xmin=0,rSlider.xmax=8,rSlider.xspan=8,rSlider.setValue(r),rSlider.shortTickStep=0,rSlider.longTickStep=1,rSlider.labelStep=1,rSlider.text="r",rSlider.textColor=Color.yellow,rSlider.valueDecimalDigits=2
,rSlider.labelDecimalDigits=0,thetaSlider.xmin=0,thetaSlider.xmax=2,thetaSlider.xspan=2,thetaSlider.setValue(theta),thetaSlider.shortTickStep=.5,thetaSlider.longTickStep=1,thetaSlider.labelStep=1,thetaSlider.text="\u03b8",thetaSlider.textColor=Color.yellow,thetaSlider.valueDecimalDigits=2,thetaSlider.automaticLabels=!1,thetaSlider.labels=[new Label(0,"0"),new Label(.5,"\u03c0 / 2"),new Label(1.5,"3\u03c0 / 2"),new Label(1,"\u03c0"),new Label(2,"2\u03c0")],thetaSlider.hasPI=!0,aSlider.xmin=-6,aSlider.xmax=6,aSlider.xspan=12,aSlider.setValue(a),aSlider.shortTickStep=1,aSlider.longTickStep=3,aSlider.labelStep=3,aSlider.text="",aSlider.textColor=Color.green,aSlider.valueDecimalDigits=1,aSlider.labelDecimalDigits=0,bSlider.xmin=-6,bSlider.xmax=6,bSlider.xspan=12,bSlider.setValue(b),bSlider.shortTickStep=1,bSlider.longTickStep=3,bSlider.labelStep=3,bSlider.text="",bSlider.textColor=Color.green,bSlider.valueDecimalDigits=1,bSlider.labelDecimalDigits=0,cSlider.xmin=-6,cSlider.xmax=6,cSlider.xspan=12
,cSlider.setValue(c),cSlider.shortTickStep=1,cSlider.longTickStep=3,cSlider.labelStep=3,cSlider.text="",cSlider.textColor=Color.green,cSlider.valueDecimalDigits=1,cSlider.labelDecimalDigits=0,dSlider.xmin=-6,dSlider.xmax=6,dSlider.xspan=12,dSlider.setValue(d),dSlider.shortTickStep=1,dSlider.longTickStep=3,dSlider.labelStep=3,dSlider.text="",dSlider.textColor=Color.green,dSlider.valueDecimalDigits=1,dSlider.labelDecimalDigits=0}function setGraph(){graph.xText="x",graph.yText="y",graph.xmin=-6,graph.xmax=6,graph.xspan=12,graph.xShortTickMin=0,graph.xShortTickMax=0,graph.xShortTickStep=0,graph.xLongTickMin=0,graph.xLongTickMax=0,graph.xLongTickStep=0,graph.xLabelMin=0,graph.xLabelMax=1,graph.xLabelStep=0,graph.xGridMin=-5,graph.xGridMax=5,graph.xGridStep=1,graph.xLabelDecimalDigits=0,graph.ymin=-6,graph.ymax=6,graph.yspan=12,graph.yShortTickMin=0,graph.yShortTickMax=9,graph.yShortTickStep=0,graph.yLongTickMin=0,graph.yLongTickMax=0,graph.yLongTickStep=0,graph.yLabelMin=0,graph.yLabelMax=1,
graph.yLabelStep=0,graph.yGridMin=-5,graph.yGridMax=5,graph.yGridStep=1,graph.yLabelDecimalDigits=0,graph.x0=0,graph.y0=0,graph.showHorizontalCrosshair=!1,graph.showVerticalCrosshair=!1}function generateBuffer(){}function vinxSliderMouseDown(){vinx=vinxSlider.xvalue,r=calculateR(),theta=calculateTheta(),voutx=calculatevoutx(),vouty=calculatevouty(),rSlider.setValue(r),thetaSlider.setValue(theta/Math.PI),update()}function vinySliderMouseDown(){viny=vinySlider.yvalue,r=calculateR(),theta=calculateTheta(),voutx=calculatevoutx(),vouty=calculatevouty(),rSlider.setValue(r),thetaSlider.setValue(theta/Math.PI),update()}function rSliderMouseDown(){r=rSlider.xvalue,vinx=calculatevinx(),viny=calculateviny(),voutx=calculatevoutx(),vouty=calculatevouty(),vinxSlider.setValue(vinx),vinySlider.setValue(viny),update()}function thetaSliderMouseDown(){theta=Math.PI*thetaSlider.xvalue,vinx=calculatevinx(),viny=calculateviny(),voutx=calculatevoutx(),vouty=calculatevouty(),vinxSlider.setValue(vinx),vinySlider
.setValue(viny);var html="<span class='red-text'>Red: &theta; = "+theta.toFixed(2)+"</span>&nbsp;<span class='green-text'>Green: &beta;<sub>2</sub></span>";richText.node.innerHTML=html,update()}function aSliderMouseDown(){a=aSlider.xvalue,voutx=calculatevoutx(),vouty=calculatevouty(),update()}function bSliderMouseDown(){b=bSlider.xvalue,voutx=calculatevoutx(),vouty=calculatevouty(),update()}function cSliderMouseDown(){c=cSlider.xvalue,voutx=calculatevoutx(),vouty=calculatevouty(),update()}function dSliderMouseDown(){d=dSlider.xvalue,voutx=calculatevoutx(),vouty=calculatevouty(),update()}function aTextBoxKeyPress(){if(event.keyCode===13){var el=event.srcElement,val=parseFloat(el.value);val=isNaN(val)?0:val,aSlider.setValue(val),aSliderMouseDown(),el.blur()}}function bTextBoxKeyPress(){if(event.keyCode===13){var el=event.srcElement,val=parseFloat(el.value);val=isNaN(val)?0:val,bSlider.setValue(val),bSliderMouseDown(),el.blur()}}function cTextBoxKeyPress(){if(event.keyCode===13){var el=event
.srcElement,val=parseFloat(el.value);val=isNaN(val)?0:val,cSlider.setValue(val),cSliderMouseDown(),el.blur()}}function dTextBoxKeyPress(){if(event.keyCode===13){var el=event.srcElement,val=parseFloat(el.value);val=isNaN(val)?0:val,dSlider.setValue(val),dSliderMouseDown(),el.blur()}}function graphMouseDown(args){vinx=args.x,viny=args.y,r=calculateR(),theta=calculateTheta(),voutx=calculatevoutx(),vouty=calculatevouty(),vinxSlider.setValue(vinx),vinySlider.setValue(viny),rSlider.setValue(r),thetaSlider.setValue(theta/Math.PI),update()}function graphMouseDrag(args){vinx=args.x,viny=args.y,vinx>graph.xmax?vinx=graph.xmax:vinx<graph.xmin&&(vinx=graph.xmin),viny>graph.ymax?viny=graph.ymax:viny<graph.ymin&&(viny=graph.ymin),r=calculateR(),theta=calculateTheta(),voutx=calculatevoutx(),vouty=calculatevouty(),vinxSlider.setValue(vinx),vinySlider.setValue(viny),rSlider.setValue(r),thetaSlider.setValue(theta/Math.PI),update()}function calculateR(){return Math.sqrt(vinx*vinx+viny*viny)}function calculateTheta
(){var ang=Math.atan2(viny,vinx);return ang>=0?ang:2*Math.PI+ang}function calculatevinx(){return r*Math.cos(theta)}function calculateviny(){return r*Math.sin(theta)}function calculatevoutx(){return a*vinx+b*viny}function calculatevouty(){return c*vinx+d*viny}function update(){updateGraph(),updateSliders(),updateTexts(),updateTB()}function updateGraph(){graph.updateDrawingZone(),Math.sqrt(vinx*vinx+viny*viny)!==0?graph.drawArrow(0,0,vinx,viny,Color.yellow):graph.drawPoint(0,0,Color.yellow),Math.sqrt(voutx*voutx+vouty*vouty)!==0?graph.drawArrow(0,0,voutx,vouty,Color.cyan):graph.drawPoint(0,0,Color.cyan)}function updateSliders(){vinxSlider.draw(),vinySlider.draw(),rSlider.draw(),thetaSlider.draw(),aSlider.draw(),bSlider.draw(),cSlider.draw(),dSlider.draw()}function updateTexts(){vinxText.text=vinx.toFixed(2),vinyText.text=viny.toFixed(2),vinxText.draw(),vinyText.draw(),voutxText.text=voutx.toFixed(2),voutyText.text=vouty.toFixed(2),voutxText.draw(),voutyText.draw()}function updateTB(){tb[0
].node.value=a.toFixed(2),tb[1].node.value=b.toFixed(2),tb[2].node.value=c.toFixed(2),tb[3].node.value=d.toFixed(2),tool.drawLeftBracket(480,400,58,Color.litegray),tool.drawRightBracket(630,400,58,Color.litegray),richText.draw()}function draw(){tool.setPaintOn("canvas"),tool.paint(),update()}})})(RequireJS.requirejs,RequireJS.require,RequireJS.define)